import React, { useContext, useState, useEffect, useRef } from "react";
import Confetti from "react-confetti";
import { Context } from "../store/appContext";

import "../../styles/home.scss";
import "../../styles/all.scss";

import Dropdown from "react-bootstrap/Dropdown";
import DropdownButton from "react-bootstrap/DropdownButton";
import SplitButton from "react-bootstrap/SplitButton";

import { Card } from "../component/card";

export const Home = () => {
	const { store, actions } = useContext(Context);

	const [height, setHeight] = useState(null);
	const [width, setWidth] = useState(null);
	const [show, setShow] = useState(null);
	const confettiRef = useRef(null);

	useEffect(() => {
		actions.getAllCities();
		if (store.loginUser > 0) {
			actions.getLikesUser(store.loginUser);
		}
	}, []);

	useEffect(() => {
		setHeight(confettiRef.current.clientHeight);
		setWidth(confettiRef.current.clientWidth);
	}, []);

	const handleShow = toggle => {
		setShow(toggle);
	};

	const info = () => {
		console.log("Soy el onMouseOver");
	};

	const allCities = store.cities.slice(0, 4).map((city, index) => {
		return <Card key={index} city={city} />;
	});

	const allCities2 = store.cities.map((city, index) => {
		return <Card key={index} city={city} />;
	});

	return (
		<div onMOuseEnter={() => handleShow(true)} onMouseLeave={() => handleShow(false)} ref={confettiRef}>
			<div className=" overCarousel lobster text-light">
				<h1 className="mb-0">
					LetÂ´s go Around Spain &nbsp;
					<img
						className="flag"
						src="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMnB0IiB2aWV3Qm94PSIwIC03NyA1MTIgNTEyIiB3aWR0aD0iNTEycHQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTI1LjYwMTU2MiA4LjUzMTI1aDQ2MC43OTY4NzZjOS40MjU3ODEgMCAxNy4wNzAzMTIgNy42NDQ1MzEgMTcuMDcwMzEyIDE3LjA3MDMxMnYzMDcuMTk5MjE5YzAgOS40MjU3ODEtNy42NDQ1MzEgMTcuMDY2NDA3LTE3LjA3MDMxMiAxNy4wNjY0MDdoLTQ2MC43OTY4NzZjLTkuNDI1NzgxIDAtMTcuMDcwMzEyLTcuNjQwNjI2LTE3LjA3MDMxMi0xNy4wNjY0MDd2LTMwNy4xOTkyMTljMC05LjQyNTc4MSA3LjY0NDUzMS0xNy4wNzAzMTIgMTcuMDcwMzEyLTE3LjA3MDMxMnptMCAwIiBmaWxsPSIjYzUyODI4Ii8+PHBhdGggZD0ibTI1LjYwMTU2MiA4LjUzMTI1aDQzNS4xOTkyMTljOS40MjU3ODEgMCAxNy4wNjY0MDcgNy42NDQ1MzEgMTcuMDY2NDA3IDE3LjA3MDMxMnYzMDcuMTk5MjE5YzAgOS40MjU3ODEtNy42NDA2MjYgMTcuMDY2NDA3LTE3LjA2NjQwNyAxNy4wNjY0MDdoLTQzNS4xOTkyMTljLTkuNDI1NzgxIDAtMTcuMDcwMzEyLTcuNjQwNjI2LTE3LjA3MDMxMi0xNy4wNjY0MDd2LTMwNy4xOTkyMTljMC05LjQyNTc4MSA3LjY0NDUzMS0xNy4wNzAzMTIgMTcuMDcwMzEyLTE3LjA3MDMxMnptMCAwIiBmaWxsPSIjZjQ0MzM1Ii8+PHBhdGggZD0ibTM0MS43NjE3MTkgMjkwLjEzMjgxMmgxNjEuNzA3MDMxdi0yMjEuODY3MTg3aC00OTQuOTM3NXYyMjEuODY3MTg3em0wIDAiIGZpbGw9IiNmZmIzMDEiLz48cGF0aCBkPSJtMzI0LjUyMzQzOCAyOTAuMTMyODEyaDE1My4zNDM3NXYtMjIxLjg2NzE4N2gtNDY5LjMzNTkzOHYyMjEuODY3MTg3em0wIDAiIGZpbGw9IiNmZWMxMDgiLz48cGF0aCBkPSJtMTI4IDE2Mi4xMzI4MTJoMzQuMTMyODEydjM0LjEzMjgxM2gtMzQuMTMyODEyem0wIDAiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtOTMuODY3MTg4IDE2Mi4xMzI4MTJoMzQuMTMyODEydjM0LjEzMjgxM2gtMzQuMTMyODEyem0wIDAiIGZpbGw9IiNmNDQzMzUiLz48cGF0aCBkPSJtMTYyLjEzMjgxMiAxOTYuMjY1NjI1djE3LjA3MDMxM2MwIDE0LjEzNjcxOC0xMS40NjA5MzcgMjUuNTk3NjU2LTI1LjYwMTU2MiAyNS41OTc2NTZoLTE3LjA2NjQwNmMtMTQuMTM2NzE5IDAtMjUuNTk3NjU2LTExLjQ2MDkzOC0yNS41OTc2NTYtMjUuNTk3NjU2di0xNy4wNzAzMTN6bTAgMCIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xNjIuMTMyODEyIDE5Ni4yNjU2MjV2MTcuMDcwMzEzYzAgMTQuMTM2NzE4LTUuNzM0Mzc0IDI1LjU5NzY1Ni0xMi44MDA3ODEgMjUuNTk3NjU2aC0yMS4zMzIwMzF2LTQyLjY2Nzk2OXptMCAwIiBmaWxsPSIjZjQ0MzM1Ii8+PHBhdGggZD0ibTEyOCAxNDUuMDY2NDA2djE3LjA2NjQwNmgtMzQuMTMyODEyYy00LjcxNDg0NCAwLTguNTMxMjUtMy44MjAzMTItOC41MzEyNS04LjUzMTI1di04LjUzNTE1NmMuMDI3MzQzLTkuNDE0MDYyIDcuNjUyMzQzLTE3LjAzOTA2MiAxNy4wNjY0MDYtMTcuMDY2NDA2aDguNTMxMjVjOS40MjU3ODEgMCAxNy4wNjY0MDYgNy42NDA2MjUgMTcuMDY2NDA2IDE3LjA2NjQwNnptMCAwIiBmaWxsPSIjZjBjNDE5Ii8+PHBhdGggZD0ibTE3MC42Njc5NjkgMTQ1LjA2NjQwNnY4LjUzNTE1NmMwIDQuNzEwOTM4LTMuODIwMzEzIDguNTMxMjUtOC41MzUxNTcgOC41MzEyNWgtMzQuMTMyODEydi0xNy4wNjY0MDZjMC05LjQyNTc4MSA3LjY0MDYyNS0xNy4wNjY0MDYgMTcuMDY2NDA2LTE3LjA2NjQwNmg4LjUzNTE1NmM5LjQxNDA2My4wMjczNDQgMTcuMDM5MDYzIDcuNjUyMzQ0IDE3LjA2NjQwNyAxNy4wNjY0MDZ6bTAgMCIgZmlsbD0iI2YwYzQxOSIvPjxwYXRoIGQ9Im02OC4yNjU2MjUgMjQ3LjQ2ODc1aC0xNy4wNjY0MDZjLTQuNzEwOTM4IDAtOC41MzEyNS0zLjgyNDIxOS04LjUzMTI1LTguNTM1MTU2IDAtNC43MTA5MzggMy44MjAzMTItOC41MzEyNSA4LjUzMTI1LTguNTMxMjV2LTY4LjI2OTUzMmMwLTQuNzEwOTM3IDMuODIwMzEyLTguNTMxMjUgOC41MzUxNTYtOC41MzEyNSA0LjcxMDkzNyAwIDguNTMxMjUgMy44MjAzMTMgOC41MzEyNSA4LjUzMTI1djY4LjI2NTYyNmM0LjcxNDg0NCAwIDguNTM1MTU2IDMuODI0MjE4IDguNTM1MTU2IDguNTM1MTU2IDAgNC43MTA5MzctMy44MjAzMTIgOC41MzUxNTYtOC41MzUxNTYgOC41MzUxNTZ6bTAgMCIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0yMDQuODAwNzgxIDI0Ny40Njg3NWgtMTcuMDY2NDA2Yy00LjcxNDg0NCAwLTguNTM1MTU2LTMuODI0MjE5LTguNTM1MTU2LTguNTM1MTU2IDAtNC43MTA5MzggMy44MjAzMTItOC41MzEyNSA4LjUzNTE1Ni04LjUzMTI1di02OC4yNjk1MzJjMC00LjcxMDkzNyAzLjgyMDMxMy04LjUzMTI1IDguNTMxMjUtOC41MzEyNXM4LjUzNTE1NiAzLjgyMDMxMyA4LjUzNTE1NiA4LjUzMTI1djY4LjI2NTYyNmM0LjcxMDkzOCAwIDguNTMxMjUgMy44MjQyMTggOC41MzEyNSA4LjUzNTE1NiAwIDQuNzEwOTM3LTMuODIwMzEyIDguNTM1MTU2LTguNTMxMjUgOC41MzUxNTZ6bTAgMCIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xNTMuNjAxNTYyIDExOS40Njg3NWgtOC41MzUxNTZjLTIuOTE0MDYyLjAyNzM0NC01LjgwMDc4MS41NTg1OTQtOC41MzEyNSAxLjU2NjQwNnYtMTAuMTAxNTYyYzAtNC43MTA5MzgtMy44MjAzMTItOC41MzEyNS04LjUzNTE1Ni04LjUzMTI1LTQuNzEwOTM4IDAtOC41MzEyNSAzLjgyMDMxMi04LjUzMTI1IDguNTMxMjV2MTAuMTAxNTYyYy0yLjczNDM3NS0xLjAwNzgxMi01LjYyMTA5NC0xLjUzOTA2Mi04LjUzNTE1Ni0xLjU2NjQwNmgtOC41MzUxNTZjLTE0LjEzNjcxOSAwLTI1LjU5NzY1NyAxMS40NjA5MzgtMjUuNTk3NjU3IDI1LjU5NzY1NnY4LjUzNTE1NmMuMDE1NjI1IDYuMDcwMzEzIDMuMjY5NTMxIDExLjY2Nzk2OSA4LjUzMTI1IDE0LjY5MTQwN3Y0NS4wMzkwNjJjMCAxOC44NTE1NjMgMTUuMjgxMjUgMzQuMTMyODEzIDM0LjEzMjgxMyAzNC4xMzI4MTNoMTcuMDY2NDA2YzE4Ljg1MTU2MiAwIDM0LjEzMjgxMi0xNS4yODEyNSAzNC4xMzI4MTItMzQuMTMyODEzdi00NS4wMzkwNjJjNS4yNjU2MjYtMy4wMjM0MzggOC41MTU2MjYtOC42MjEwOTQgOC41MzUxNTctMTQuNjkxNDA3di04LjUzNTE1NmMwLTE0LjEzNjcxOC0xMS40NjA5MzgtMjUuNTk3NjU2LTI1LjU5NzY1Ny0yNS41OTc2NTZ6bS04LjUzNTE1NiAxNy4wNjI1aDguNTM1MTU2YzQuNzEwOTM4IDAgOC41MzEyNSAzLjgyNDIxOSA4LjUzMTI1IDguNTM1MTU2djguNTMxMjVoLTI1LjYwMTU2MnYtOC41MzEyNWMwLTQuNzEwOTM3IDMuODI0MjE5LTguNTM1MTU2IDguNTM1MTU2LTguNTM1MTU2em04LjUzNTE1NiA1MS4yMDMxMjVoLTE3LjA3MDMxMnYtMTcuMDcwMzEzaDE3LjA3MDMxMnptLTM0LjEzMjgxMiAwaC0xNy4wNzAzMTJ2LTE3LjA3MDMxM2gxNy4wNzAzMTJ6bS0yNS42MDE1NjItNDIuNjY3OTY5YzAtNC43MTA5MzcgMy44MjAzMTItOC41MzEyNSA4LjUzMTI1LTguNTMxMjVoOC41MzUxNTZjNC43MTA5MzcgMCA4LjUzMTI1IDMuODIwMzEzIDguNTMxMjUgOC41MzEyNXY4LjUzNTE1NmgtMjUuNTk3NjU2em04LjUzMTI1IDY4LjI2NTYyNXYtOC41MzEyNWgxNy4wNzAzMTJ2MjUuNTk3NjU3Yy05LjQyOTY4OCAwLTE3LjA3MDMxMi03LjY0MDYyNi0xNy4wNzAzMTItMTcuMDY2NDA3em0zNC4xMzI4MTIgMTcuMDY2NDA3di0yNS41OTc2NTdoMTcuMDcwMzEydjguNTMxMjVjMCA5LjQyNTc4MS03LjY0MDYyNCAxNy4wNjY0MDctMTcuMDcwMzEyIDE3LjA2NjQwN3ptMCAwIiBmaWxsPSIjYzUyODI4Ii8+PHBhdGggZD0ibTQ4Ni4zOTg0MzggMGgtNDYwLjc5Njg3NmMtMTQuMTQwNjI0IDAtMjUuNjAxNTYyIDExLjQ2MDkzOC0yNS42MDE1NjIgMjUuNjAxNTYydjMwNy4xOTkyMTljMCAxNC4xMzY3MTkgMTEuNDYwOTM4IDI1LjU5NzY1NyAyNS42MDE1NjIgMjUuNTk3NjU3aDQ2MC43OTY4NzZjMTQuMTQwNjI0IDAgMjUuNjAxNTYyLTExLjQ2MDkzOCAyNS42MDE1NjItMjUuNTk3NjU3di0zMDcuMTk5MjE5YzAtMTQuMTQwNjI0LTExLjQ2MDkzOC0yNS42MDE1NjItMjUuNjAxNTYyLTI1LjYwMTU2MnptLTQ2MC43OTY4NzYgMTcuMDY2NDA2aDQ2MC43OTY4NzZjNC43MTQ4NDMgMCA4LjUzNTE1NiAzLjgyMDMxMyA4LjUzNTE1NiA4LjUzNTE1NnYzNC4xMzI4MTNoLTQ3Ny44NjcxODh2LTM0LjEzMjgxM2MwLTQuNzE0ODQzIDMuODIwMzEzLTguNTM1MTU2IDguNTM1MTU2LTguNTM1MTU2em00NjkuMzMyMDMyIDI2NC41MzUxNTZoLTQ3Ny44NjcxODh2LTIwNC44MDA3ODFoNDc3Ljg2NzE4OHptLTguNTM1MTU2IDU5LjczMDQ2OWgtNDYwLjc5Njg3NmMtNC43MTQ4NDMgMC04LjUzNTE1Ni0zLjgyMDMxMi04LjUzNTE1Ni04LjUzMTI1di0zNC4xMzI4MTJoNDc3Ljg2NzE4OHYzNC4xMzI4MTJjMCA0LjcxMDkzOC0zLjgyMDMxMyA4LjUzMTI1LTguNTM1MTU2IDguNTMxMjV6bTAgMCIvPjxwYXRoIGQ9Im01MS4xOTkyMTkgMjQ3LjQ2ODc1aDE3LjA2NjQwNmM0LjcxNDg0NCAwIDguNTM1MTU2LTMuODI0MjE5IDguNTM1MTU2LTguNTM1MTU2IDAtNC43MTA5MzgtMy44MjAzMTItOC41MzEyNS04LjUzNTE1Ni04LjUzMTI1di02OC4yNjk1MzJjMC00LjcxMDkzNy0zLjgyMDMxMy04LjUzMTI1LTguNTMxMjUtOC41MzEyNXMtOC41MzUxNTYgMy44MjAzMTMtOC41MzUxNTYgOC41MzEyNXY2OC4yNjU2MjZjLTQuNzEwOTM4IDAtOC41MzEyNSAzLjgyNDIxOC04LjUzMTI1IDguNTM1MTU2IDAgNC43MTA5MzcgMy44MjAzMTIgOC41MzUxNTYgOC41MzEyNSA4LjUzNTE1NnptMCAwIi8+PHBhdGggZD0ibTE4Ny43MzQzNzUgMjQ3LjQ2ODc1aDE3LjA2NjQwNmM0LjcxMDkzOCAwIDguNTMxMjUtMy44MjQyMTkgOC41MzEyNS04LjUzNTE1NiAwLTQuNzEwOTM4LTMuODIwMzEyLTguNTMxMjUtOC41MzEyNS04LjUzMTI1di02OC4yNjk1MzJjMC00LjcxMDkzNy0zLjgyMDMxMi04LjUzMTI1LTguNTM1MTU2LTguNTMxMjUtNC43MTA5MzcgMC04LjUzMTI1IDMuODIwMzEzLTguNTMxMjUgOC41MzEyNXY2OC4yNjU2MjZjLTQuNzE0ODQ0IDAtOC41MzUxNTYgMy44MjQyMTgtOC41MzUxNTYgOC41MzUxNTYgMCA0LjcxMDkzNyAzLjgyMDMxMiA4LjUzNTE1NiA4LjUzNTE1NiA4LjUzNTE1NnptMCAwIi8+PHBhdGggZD0ibTg1LjMzMjAzMSAxNjguMjkyOTY5djQ1LjAzOTA2MmMwIDE4Ljg1MTU2MyAxNS4yODEyNSAzNC4xMzI4MTMgMzQuMTMyODEzIDM0LjEzMjgxM2gxNy4wNjY0MDZjMTguODUxNTYyIDAgMzQuMTMyODEyLTE1LjI4MTI1IDM0LjEzMjgxMi0zNC4xMzI4MTN2LTQ1LjAzOTA2MmM1LjI2NTYyNi0zLjAyMzQzOCA4LjUxNTYyNi04LjYyMTA5NCA4LjUzNTE1Ny0xNC42OTE0MDd2LTguNTM1MTU2YzAtMTQuMTM2NzE4LTExLjQ2MDkzOC0yNS41OTc2NTYtMjUuNjAxNTYzLTI1LjU5NzY1NmgtOC41MzEyNWMtMi45MTQwNjIuMDI3MzQ0LTUuODAwNzgxLjU1ODU5NC04LjUzNTE1NiAxLjU2NjQwNnYtMTAuMTAxNTYyYzAtNC43MTA5MzgtMy44MjAzMTItOC41MzEyNS04LjUzMTI1LTguNTMxMjUtNC43MTQ4NDQgMC04LjUzMTI1IDMuODIwMzEyLTguNTMxMjUgOC41MzEyNXYxMC4xMDE1NjJjLTIuNzM0Mzc1LTEuMDA3ODEyLTUuNjIxMDk0LTEuNTM5MDYyLTguNTM1MTU2LTEuNTY2NDA2aC04LjUzNTE1NmMtMTQuMTM2NzE5IDAtMjUuNTk3NjU3IDExLjQ2MDkzOC0yNS41OTc2NTcgMjUuNTk3NjU2djguNTM1MTU2Yy4wMTU2MjUgNi4wNzAzMTMgMy4yNjk1MzEgMTEuNjY3OTY5IDguNTMxMjUgMTQuNjkxNDA3em02OC4yNjk1MzEgMTkuNDQxNDA2aC0xNy4wNzAzMTJ2LTE3LjA3MDMxM2gxNy4wNzAzMTJ6bS0zNC4xMzI4MTIgMGgtMTcuMDcwMzEydi0xNy4wNzAzMTNoMTcuMDcwMzEyem0tMTcuMDcwMzEyIDI1LjU5NzY1NnYtOC41MzEyNWgxNy4wNzAzMTJ2MjUuNTk3NjU3Yy05LjQyOTY4OCAwLTE3LjA3MDMxMi03LjY0MDYyNi0xNy4wNzAzMTItMTcuMDY2NDA3em0zNC4xMzI4MTIgMTcuMDY2NDA3di0yNS41OTc2NTdoMTcuMDcwMzEydjguNTMxMjVjMCA5LjQyNTc4MS03LjY0MDYyNCAxNy4wNjY0MDctMTcuMDcwMzEyIDE3LjA2NjQwN3ptOC41MzUxNTYtOTMuODY3MTg4aDguNTM1MTU2YzQuNzEwOTM4IDAgOC41MzEyNSAzLjgyNDIxOSA4LjUzMTI1IDguNTM1MTU2djguNTMxMjVoLTI1LjYwMTU2MnYtOC41MzEyNWMwLTQuNzEwOTM3IDMuODI0MjE5LTguNTM1MTU2IDguNTM1MTU2LTguNTM1MTU2em0tNTEuMTk5MjE4IDguNTM1MTU2YzAtNC43MTA5MzcgMy44MjAzMTItOC41MzEyNSA4LjUzMTI1LTguNTMxMjVoOC41MzUxNTZjNC43MTA5MzcgMCA4LjUzMTI1IDMuODIwMzEzIDguNTMxMjUgOC41MzEyNXY4LjUzNTE1NmgtMjUuNTk3NjU2em0wIDAiLz48L3N2Zz4="
					/>
				</h1>
				<h4>Come and be part of our big family!</h4>
			</div>
			<div className="surferTouch" />
			{store.token ? <Confetti recycle={false} numberOfPieces={500} width={width} height={height} /> : ""}
			<h1 className="col-12 text-center mt-5 bgtitles text-light lobsterHome">The Most Visited!!</h1>
			<div className="container-fluid row d-flex justify-content-center mx-auto">{allCities}</div>
			<h1 className="text-center text-light mt-5 lobsterHome">Check all of our cities!!</h1>
			<div className="container-fluid row d-flex justify-content-center mx-auto">{allCities2}</div>
		</div>
	);
};
